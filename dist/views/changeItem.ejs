<%- include('particles/header.ejs') %>

<%- include('particles/navigation.ejs') %>

<div style="display: block; margin-left: auto; text-align: center; margin-right: auto; width: min-content; border: 3px solid rgb(70, 80, 70);" class="item-rename">
  <form action="/update" method="post" style="display: inline;" enctype="multipart/form-data">
    <div class="form-group">
      <label class="form-group__label" for="title">Заголовок</label>
      <input value="<%= item.title %>" class="form-group__input" type="text" name="title" placeholder="title">
    </div>

    <div class="form-group">
      <p>Изображение</p>
      <label class="form-group__label" for="image" style="width: 161px; padding: 7px; border: 2px solid black;border-radius: 4px; min-height: 10px; background-color: white;">
        <input value="<%= item.image %>" class="form-group__input" type="file" id="image" name="image" placeholder="image" accept="image/png, image/jpeg, image/jpg, image/webp" style="display:none; width: auto; height: auto;">
        <p id="imageName" style="margin: 0px;">Выберите изображение</p>

      </label>
    </div>

    <div class="form-group">
      <label class="form-group__label" for="description">Описание</label>
      <input value="<%= item.description %>" class="form-group__input" type="text" name="description" placeholder="description">
    </div>
    <input type="hidden" value="<%= item.id %>" type="text" name="id">
    <input type="hidden" value="<%= item.image %>" name="oldImage">

    <div class="form-group">
      <label class="form-group__label" for="price">Цена</label>
      <input class="form-group__input" type="text" id="price" name="price" value="<%= item.price %>">
    </div>

    <input class="form-button" type="submit" value="Обновить">
  </form>
  <form action="/delete" method="post" style="display: inline; float: right;">

    <input type="hidden" value="<%= item.id %>" type="text" name="id">
    <input type="hidden" value="<%= item.image %>" name="oldImage">
    <input class="form-button" type="submit" value="Удалить">
  </form>
</div>

<script>
  let input = document.getElementById("image");
  let imageName = document.getElementById("imageName")

  input.addEventListener("change", () => {
    let inputImage = document.querySelector("input[type=file]").files[0];

    imageName.innerText = inputImage.name;
  })
</script>

<%- include('particles/footer.ejs') %>